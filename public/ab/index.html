<!-- index.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RadarB</title>

  <!-- Inline critical CSS -->
  <style>
    body {
      font-family: 'Roboto', 'Poppins', sans-serif;
      font-weight: 600;
      font-size: 0.8em;
      background: rgb(46, 46, 56);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 0;
    }

    /* Add other critical styles here */
    .loading {
      text-align: center;
      font-size: 24px;
      margin-top: 50px;
    }

    /* ... */
  </style>

  <!-- Load non-critical CSS asynchronously -->
  <link rel="preload" href="../styles/style.css" as="style" onload="this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="../styles/style.css">
  </noscript>

  <!-- Google Tag Manager -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KLC200B4V5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-KLC200B4V5');
  </script>

  <!-- Page Refresh Script -->
  <script>
    // Refresh the page every 6 minutes if visible
    setInterval(() => {
      if (!document.hidden) {
        window.location.reload();
      }
    }, 360000);
  </script>
</head>

<body>
  <div class="holder-of-the-divs">
    <!-- Ambient Weather Data -->
    <div id="ambientWeatherDataContainer">
      <div class="forecast-container">
        <!-- Forecast will load here -->
      </div>
    </div>

    <!-- You Are Here -->
    <div class="you-are-here" id="you-are-here">
      <!-- Location info will load here -->
    </div>

    <!-- Alerts -->
    <div class='alerts-container'>
      <div class="delays-container"><span class="airportDelays"></span></div>
      <div class="ground-stops"></div>
      <div class="crosswind-container"><span class="crosswindAlert"></span></div>
    </div>

    <!-- Sensors -->
    <div class='sensor-container'>
      <!-- Sensor data will load here -->
    </div>

    <!-- Radar Grid -->
    <div class="radar-grid">
      <div>
        <img src="https://cdn.tegna-media.com/wkyc/weather/myownradar/comp/880x495/cleveland15.gif"
          alt="Cleveland Radar">
      </div>
      <div>
        <a href="https://fox8.com/weather/forecast/" target="_blank">
          <img src="https://media.psg.nexstardigital.net/WJW/weather/west.jpg" alt="WJW Radar" loading="lazy">
        </a>
      </div>
      <div>
        <img src="https://sirocco.accuweather.com/nx_mosaic_640x480_public/sir/inmsiroh_.gif" alt="Accuweather Radar"
          loading="lazy">
      </div>
      <div>
        <a href="https://www.star.nesdis.noaa.gov/GOES/conus_band.php?sat=G16&band=GEOCOLOR&length=24" target="_blank">
          <img id="satellite"
            data-src="https://cdn.star.nesdis.noaa.gov/GOES16/ABI/SECTOR/cgl/GEOCOLOR/GOES16-CGL-GEOCOLOR-600x600.gif"
            class="lazy-load" alt="Satellite">
        </a>
      </div>
    </div>

    <!-- Image Grid -->
    <div class="image-grid">
      <!-- Camera images will load here -->
      <a href="https://www.pivotalweather.com/maps.php?ds=ndfd&p=ndfd_6hqpf&r=us_state_oh&pwplus=1" target="_blank">
        <img src="https://x-hv1.pivotalweather.com/maps/ndfd/latest/ndfd_6hqpf.us_state_oh.png"
          alt="Pivotal Weather Map 6h QPF" loading="lazy">
      </a>
      <a href="https://www.pivotalweather.com/model.php?m=hrrr&p=snowfall_acc-imp&rh=2024011518&fh=1&r=us_state_oh&dpdt=&mc=&pwplus=1"
        target="_blank">
        <img src="https://x-hv1.pivotalweather.com/maps/ndfd/latest/ndfd_24hsnow.us_state_oh.png"
          alt="Pivotal Weather Snowfall" loading="lazy">
      </a>
      <a href="https://www.glerl.noaa.gov/res/glcfs/ice.php?lake=eri" target="_blank">
        <img src="https://www.glerl.noaa.gov/data/ice/spaghetti/eri_ice_compare.png" alt="GLERL Ice Compare"
          loading="lazy">
      </a>
      <a href="https://www.glerl.noaa.gov/res/glcfs/ice.php?lake=eri" target="_blank">
        <img src="https://www.glerl.noaa.gov/res/glcfs/eri/aice.png" alt="GLERL AICE" loading="lazy">
      </a>
      <img src="https://www.weather.gov/images/cle/winter/StormTotalSnow.jpg" alt="Storm Total Snow" loading="lazy">
    </div>

    <div class="image-grid" id="pivotals">
      <!-- <img id="pivotal6hQPF" src="" alt="Weather Image"> -->
      <a target="new" href="https://www.pivotalweather.com/maps.php?ds=ndfd&p=ndfd_6hqpf&r=us_state_oh&pwplus=1">
        <img src="https://x-hv1.pivotalweather.com/maps/ndfd/latest/ndfd_6hqpf.us_state_oh.png">
      </a>
      <a target="new"
        href="https://www.pivotalweather.com/model.php?m=hrrr&p=snowfall_acc-imp&rh=2024011518&fh=1&r=us_state_oh&dpdt=&mc=&pwplus=1">
        <img src="https://x-hv1.pivotalweather.com/maps/ndfd/latest/ndfd_24hsnow.us_state_oh.png">
      </a>
      <a target="new" href="https://www.glerl.noaa.gov/res/glcfs/ice.php?lake=eri" target="_blank">
        <img alt="" src="https://www.glerl.noaa.gov/data/ice/spaghetti/eri_ice_compare.png">
      </a>
      <a target="new" href="https://www.glerl.noaa.gov/res/glcfs/ice.php?lake=eri" target="_blank">
        <img alt="" src="https://www.glerl.noaa.gov/res/glcfs/eri/aice.png">
      </a>
      <img src="https://www.weather.gov/images/cle/winter/StormTotalSnow.jpg">

    </div>
    <!-- Meteos -->
    <div class="meteos">
      <!-- Meteograms will load here -->
    </div>

    <!-- Iframe for Meteos -->
    <iframe height="4250px" src="../meteos.html" width="1200px" loading="lazy"></iframe>

    <!-- And a chart -->
    <div style="width: 100%; max-width: 1000px; height: 300px; margin: 2rem auto;">
      <canvas id="duskChart"></canvas>
    </div>
    <!-- Dusk Progression Table -->
    <div id="duskTableContainer" style="width: 100%; max-width: 600px; margin: 2rem auto;"></div>   
  </div>

  <!-- Lazy Load Script -->
  <script>
    const lazyLoadImages = () => {
      const images = document.querySelectorAll('.lazy-load');
      const options = {
        threshold: 0.2,
        rootMargin: '0px 0px 100px 0px'
      };

      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target;
            const src = img.getAttribute('data-src');

            img.setAttribute('src', src);
            img.classList.remove('lazy-load');
            observer.unobserve(img);
          }
        });
      }, options);

      images.forEach(img => observer.observe(img));
    };

    window.addEventListener('DOMContentLoaded', lazyLoadImages);
  </script>

  <!-- Main Application Script -->
  <script src="../scripts/app124.js?v=3" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</body>

</html>